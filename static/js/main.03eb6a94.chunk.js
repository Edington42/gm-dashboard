(this.webpackJsonpdash=this.webpackJsonpdash||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){},137:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(17),i=n.n(s),r=(n(133),n(134),n(13)),l=n(89),o=n.n(l),j=n(100),u=n(9),d=n(2),b=Object(a.createContext)({dash:[],clearDash:function(){},exportDash:function(){},importDash:function(e){},saveMonster:function(e){},deleteMonster:function(e){}}),O=function(e){var t=e.children,n=localStorage.getItem("dash"),c=Object(a.useState)(n?JSON.parse(n):[]),s=Object(u.a)(c,2),i=s[0],l=s[1];return Object(d.jsx)(b.Provider,{value:{dash:i,clearDash:function(){localStorage.removeItem("dash"),l([])},exportDash:function(){var e=document.createElement("a"),t=new Blob([JSON.stringify(i)],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="Dashboard",e.click()},importDash:function(e){if(null!==e.target&&null!==e.target.files){var t=new FileReader;t.onload=function(){var e=Object(j.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t&&null!==t.target&&"string"===typeof t.target.result&&(n=t.target.result,localStorage.setItem("dash",n),l(JSON.parse(n)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.readAsText(e.target.files[0])}},saveMonster:function(e){var t=JSON.parse(e),n=i.length;t.id=n;var a=[].concat(Object(r.a)(i),[t]);l(a),localStorage.setItem("dash",JSON.stringify(a))},deleteMonster:function(e){var t=i.filter((function(t){return t.id!==e}));l(t),localStorage.setItem("dash",JSON.stringify(t))}},children:t})},h=n(37),x=n(204),m=n(207),f=n(208),g=n(209),v=n(230),p=n(221),C=n(211),N=n(212),y=n(83),S={bonus:0,toRoll:[{sides:20,count:1}],rolls:2};function k(e){var t=e.split("d");return{count:parseInt(t[0]),sides:parseInt(t[1])}}function F(e){return{roll:Math.trunc(Math.random()*e+1),sides:e}}function R(e){var t="df-d";return t+=e.sides,t+="-",t+=e.roll}new Map([[4,97],[6,65],[8,101],[10,49],[12,109],[20,71]]);n(137);function E(e){var t=e.roll;return Object(d.jsx)("i",{className:R(t)+" die-icon"})}var _=Object(a.createContext)({rollLog:[],logRoll:function(){}});function D(e){var t=e.rolls.map((function(e){return function(e){for(var t={title:e.rollTitle,bonus:e.bonus,rolls:[]},n=function(n){var a=0,c=[];e.toRoll.forEach((function(e){for(var t=0;t<e.count;t++){var n=F(e.sides);a+=n.roll,c.push(n)}})),a+=e.bonus,t.rolls.push({dice:c,total:a})},a=0;a<e.rolls;a++)n();return t}(e)}));return{monsterName:e.monsterName,actionName:e.actionName,rolls:t}}var I=function(e){var t=e.children;var n=Object(a.useReducer)((function(e,t){return[D(t)].concat(Object(r.a)(e))}),[]),c=Object(u.a)(n,2),s=c[0],i=c[1];return Object(d.jsx)(_.Provider,{value:{rollLog:s,logRoll:i},children:t})};function T(){var e=[],t=Object(a.useState)(0),n=Object(u.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(0),r=Object(u.a)(i,2),l=r[0],o=r[1],j=Object(a.useContext)(_).logRoll;function b(e){var t=parseInt(e);t>0?s(t):o(t)}function O(e){j({rolls:[Object(h.a)(Object(h.a)({},S),{},{bonus:e})]})}for(var k=function(t){e.push(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{item:!0,xs:6,children:Object(d.jsxs)(m.a,{onClick:function(){return O(t)},variant:"contained",className:"mod-button",children:["+",t]})}),Object(d.jsx)(x.a,{item:!0,xs:6,children:Object(d.jsxs)(m.a,{onClick:function(){return O(-t)},variant:"outlined",className:"mod-button",children:["-",t]})})]}))},F=0;F<6;F++)k(F);for(var R=[],D=[],I=function(e){R.push(Object(d.jsxs)(f.a,{onClick:function(){return O(e)},value:+e,children:["+",e]})),D.push(Object(d.jsxs)(f.a,{onClick:function(){return O(-e)},value:-e,children:["-",e]}))},T=5;T<30;T++)I(T);return e.push(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{item:!0,xs:6,children:Object(d.jsxs)(g.a,{fullWidth:!0,children:[Object(d.jsx)(v.a,{id:"positive-bonus-label",children:"+ Bonus "}),Object(d.jsx)(p.a,{labelId:"positive-bonus-label",className:"mod-button select-mod",variant:"outlined",value:c,onChange:function(e){return b(e.target.value)},children:R})]})}),Object(d.jsx)(x.a,{item:!0,xs:6,children:Object(d.jsxs)(g.a,{fullWidth:!0,children:[Object(d.jsx)(v.a,{id:"negative-bonus-label",children:"- Bonus"}),Object(d.jsx)(p.a,{labelId:"negative-bonus-label",className:"mod-button select-mod",value:l,onChange:function(e){return b(e.target.value)},variant:"outlined",children:D})]})})]})),Object(d.jsx)(C.a,{className:"monster",children:Object(d.jsxs)(N.a,{style:{paddingLeft:".25em",paddingRight:".25em"},children:[Object(d.jsxs)(y.a,{variant:"h6",style:{display:"inline"},children:["Ability Roll ",Object(d.jsx)(E,{roll:{sides:20,roll:20}}),"|",Object(d.jsx)(E,{roll:{sides:20,roll:20}})]}),Object(d.jsx)(x.a,{container:!0,className:"mod-grid",spacing:2,children:e})]})})}var M=n(149),w=n(216),L=n(217),J=n(81),A=n.n(J),B=n(80),P=n.n(B),H=n(108),W=n.n(H),z=n(233),U=n(214);function X(e){var t=e.action,n=Object(a.useState)(!1),c=Object(u.a)(n,2),s=c[0],i=c[1],r=Object(a.useContext)(_).logRoll;function l(){i(!s)}function o(e){r(function(e){var t=[];return t.push(Object(h.a)(Object(h.a)({},S),{},{rollTitle:"To Hit:",bonus:e.attack_bonus})),t.push({rollTitle:"Damage:",bonus:e.damage_bonus,toRoll:[k(e.damage_dice)],rolls:1}),{monsterName:e.monsterName,actionName:e.name,rolls:t}}(e))}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(M.a,{style:{padding:"0px",paddingRight:"4px"},children:[Object(d.jsxs)(z.a,{style:{padding:"0px",paddingRight:"4px"},title:t.desc,onClick:function(e){return o(t)},children:[Object(d.jsx)(U.a,{children:Object(d.jsx)(W.a,{})}),Object(d.jsx)(w.a,{primary:t.name})]}),s?Object(d.jsx)(P.a,{onClick:l}):Object(d.jsx)(A.a,{onClick:l})]}),Object(d.jsx)(L.a,{in:s,children:Object(d.jsx)(y.a,{variant:"body1",children:t.desc})})]})}var V=n(210);function q(e){var t=e.monster,n=[].concat(Object(r.a)(t.actions),Object(r.a)(t.reactions),Object(r.a)(t.legendary_actions)),a=t.name,c=n.map((function(e){return Object(d.jsx)(X,{action:Object(h.a)(Object(h.a)({},e),{},{monsterName:a})},e.name)}));return Object(d.jsx)(V.a,{children:c})}var G=n(110),K=n.n(G),Q=n(109),Y=n.n(Q),Z=Object(a.createContext)({isEditing:!1,editText:"",editSaved:function(e){},textChange:function(e){},toggleEdit:function(){},setEditText:function(e){}}),$=function(e){var t=e.children,n=Object(a.useState)(""),c=Object(u.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(!1),l=Object(u.a)(r,2),o=l[0],j=l[1];return Object(d.jsx)(Z.Provider,{value:{editText:s,isEditing:o,editSaved:function(e){j(!0),i(JSON.stringify(e))},textChange:function(e){i(e.target.value)},toggleEdit:function(){j(!o)},setEditText:i},children:t})},ee=n(218);function te(e){var t=e.stats,n=Object.entries(t.speed).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(y.a,{variant:"body1",children:[n,":"," "+a,"ft"]},n)}));function a(e){var t=c(e);return e+" ("+(t>=0?"+":"-")+Math.abs(t)+")"}function c(e){return Math.floor((e-10)/2)}function s(e,t){return null===e&&(e=c(t))," ("+(e>=0?"+":"-")+Math.abs(e)+")"}var i=[a(t.strength),a(t.dexterity),a(t.constitution),a(t.intelligence),a(t.wisdom),a(t.charisma)],r=[s(t.strength_save,t.strength),s(t.dexterity_save,t.dexterity),s(t.constitution_save,t.constitution),s(t.intelligence_save,t.intelligence),s(t.wisdom_save,t.wisdom),s(t.charisma_save,t.charisma)],l=["STR","DEX","CON","INT","WIS","CHA"].map((function(e){return Object(d.jsx)(x.a,{item:!0,xs:2,children:Object(d.jsx)(y.a,{variant:"body1",children:e})},e)})),o=i.map((function(e,t){return Object(d.jsx)(x.a,{item:!0,xs:2,children:Object(d.jsx)(y.a,{variant:"caption",children:e})},t)})),j=["STRsv","DEXsv","CONsv","INTsv","WISsv","CHAsv"].map((function(e){return Object(d.jsx)(x.a,{item:!0,xs:2,children:Object(d.jsx)(y.a,{variant:"body2",children:e})},e)})),b=r.map((function(e,t){return Object(d.jsx)(x.a,{item:!0,xs:2,children:Object(d.jsx)(y.a,{variant:"caption",children:e})},t)})),O=Object.entries(t.skills).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(y.a,{variant:"body1",children:[n,":"," "+a]},n)}));Object.entries(t.special_abilities).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(y.a,{variant:"body1",children:[n,":"," "+a]},n)}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ee.a,{light:!0}),n,Object(d.jsx)(ee.a,{light:!0}),Object(d.jsxs)(x.a,{container:!0,className:"count-grid",spacing:0,children:[l,o,Object(d.jsx)(x.a,{item:!0,xs:12,children:Object(d.jsx)(ee.a,{light:!0})}),j,b]}),Object(d.jsx)(ee.a,{light:!0}),O.length>0&&Object(d.jsxs)(d.Fragment,{children:[O,Object(d.jsx)(ee.a,{light:!0})]}),t.damage_vulnerabilities&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Damage Vulnerabilities:"," "+t.damage_vulnerabilities]}),Object(d.jsx)(ee.a,{light:!0})]}),t.damage_resistances&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Damage Resitatnces:"," "+t.damage_resistances]}),Object(d.jsx)(ee.a,{light:!0})]}),t.damage_immunities&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Damage Immunities:"," "+t.damage_immunities]}),Object(d.jsx)(ee.a,{light:!0})]}),t.condition_immunities&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Condition Immunities:"," "+t.condition_immunities]}),Object(d.jsx)(ee.a,{light:!0})]}),t.senses&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Senses:"," "+t.senses]}),Object(d.jsx)(ee.a,{light:!0})]}),t.languages&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Languages:"," "+t.languages]}),Object(d.jsx)(ee.a,{light:!0})]}),t.legendary_desc&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(y.a,{children:["Legendary Desc:"," "+t.legendary_desc]}),Object(d.jsx)(ee.a,{light:!0})]}),"Special Abilities",Object(d.jsx)(ee.a,{light:!0}),"Spell Desc?",Object(d.jsx)(ee.a,{light:!0}),"Spell list to actions?",Object(d.jsx)(ee.a,{light:!0})]})}function ne(e){var t=e.stats,n=Object(a.useContext)(Z).editSaved,c=Object(a.useContext)(b).deleteMonster,s=Object(a.useState)(!1),i=Object(u.a)(s,2),r=i[0],l=i[1];function o(){console.log("Expand"),l(!r)}return Object(d.jsx)(C.a,{className:"monster",children:Object(d.jsxs)(N.a,{style:{paddingLeft:".25em",paddingRight:".25em"},children:[Object(d.jsx)(y.a,{variant:"h5",style:{display:"inline"},children:t.name}),Object(d.jsx)(Y.a,{onClick:function(e){return n(t)},style:{float:"right",margin:".25em"}}),Object(d.jsx)(K.a,{onClick:function(e){return c(t.id)},style:{float:"right",margin:".25em"}}),Object(d.jsxs)(y.a,{style:{display:"block"},children:["AC: ",t.armor_class," HP: ",t.hit_points,r?Object(d.jsx)(P.a,{onClick:o}):Object(d.jsx)(A.a,{onClick:o})]}),Object(d.jsx)(L.a,{in:r,children:Object(d.jsx)(te,{stats:t})}),Object(d.jsx)(q,{monster:t})]})})}n(143);var ae=n(226),ce=[4,6,8,10,12];function se(){var e=[],t=ce.map((function(e){return 0})),n=Object(a.useState)(t),c=Object(u.a)(n,2),s=c[0],i=c[1],l=Object(a.useContext)(_).logRoll;function o(e,t){var n={count:e,sides:ce[t]};l({rolls:[{rolls:1,toRoll:[n],bonus:0}]})}for(var j=function(t){for(var n=function(n){e.push(Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(ae.a,{item:!0,xs:2,children:Object(d.jsxs)(m.a,{onClick:function(){return o(t,n)},variant:"contained",className:"count-button",children:[t,Object(d.jsx)(E,{roll:{roll:ce[n],sides:ce[n]}})]})})}))},a=0;a<ce.length;a++)n(a)},b=1;b<6;b++)j(b);for(var O=function(t){for(var n=[],a=function(e){n.push(Object(d.jsx)(f.a,{className:"select-count",onClick:function(){return o(e,t)},value:e,children:Object(d.jsx)(y.a,{variant:"caption",children:e})}))},c=5;c<30;c++)a(c);e.push(Object(d.jsx)(ae.a,{item:!0,xs:2,children:Object(d.jsxs)(g.a,{fullWidth:!0,children:[Object(d.jsx)(v.a,{id:"d"+ce[t]+"-label",children:Object(d.jsx)(E,{roll:{roll:ce[t],sides:ce[t]}})}),Object(d.jsx)(p.a,{labelId:"positive-bonus-label",className:"mod-button select-count",variant:"outlined",value:s[t],onChange:function(e){return function(e,t){var n=parseInt(e),a=Object(r.a)(s);a[t]=n,i(a)}(e.target.value,t)},children:n})]})}))},h=0;h<ce.length;h++)O(h);var x=ce.map((function(e){return Object(d.jsx)(E,{roll:{sides:e,roll:e}},e)}));return Object(d.jsx)(C.a,{className:"monster",children:Object(d.jsxs)(N.a,{style:{paddingLeft:".25em",paddingRight:".25em"},children:[Object(d.jsxs)(y.a,{variant:"h6",style:{display:"inline"},children:["Custom Roll ",x]}),Object(d.jsx)(ae.a,{container:!0,className:"count-grid",spacing:0,columns:10,children:e})]})})}function ie(){var e=Object(a.useContext)(b).dash.map((function(e,t){return Object(d.jsx)(ne,{stats:e},t)}));return Object(d.jsxs)("div",{className:"monster-area",children:[Object(d.jsx)(T,{}),Object(d.jsx)(se,{}),e]})}var re=n(219),le=n(220),oe=n(224),je=n(111),ue=n.n(je),de=n(229),be=n(112),Oe=n.n(be),he=n(222),xe=n(227);function me(e){var t=e.anchorEl,n=e.isOpen,c=e.handleClose,s=Object(a.useContext)(b),i=s.clearDash,r=s.importDash,l=s.exportDash,o=Object(a.useContext)(Z),j=o.isEditing,u=o.toggleEdit;return Object(d.jsxs)(he.a,{anchorEl:t,open:n,onClose:c,children:[Object(d.jsx)(xe.a,{onClick:u,children:j?"Hide Edit":"Show Edit"}),Object(d.jsx)(xe.a,{onClick:i,children:"Clear Dashboard"}),Object(d.jsx)(xe.a,{onClick:l,children:"Export Dashboard"}),Object(d.jsx)(xe.a,{children:Object(d.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(d.jsx)("input",{id:"contained-button-file",type:"file",hidden:!0,onInput:r}),"Import Dashboard"]})})]})}function fe(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),r=i[0],l=i[1],o=Boolean(r),j=Object(a.useContext)(b).saveMonster,O=Object(a.useContext)(Z),h=O.editText,x=O.setEditText;Object(a.useEffect)((function(){fetch("https://api.open5e.com/monsters/?format=json&fields=slug,name&limit=10000").then((function(e){return e.json()})).then((function(e){var t=e.results;c(t)}))}),[]);var m=[];return null!==n&&void 0!==n&&(m=n.map((function(e){return Object(d.jsx)("option",{children:e.name},e.name)}))),Object(d.jsxs)(re.a,{position:"static",className:"app-header",children:[Object(d.jsxs)(le.a,{className:"tool",children:[Object(d.jsxs)(oe.a,{className:"header-left",children:[Object(d.jsxs)("select",{onChange:function(e){fetch("https://api.open5e.com/monsters/?name="+e.target.value).then((function(e){return e.json()})).then((function(e){x(JSON.stringify(e.results[0]))}))},children:[Object(d.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select a Monster"}),m]}),Object(d.jsx)(ue.a,{fontSize:"large",className:"header-icon",onClick:function(e){return j(h)}})]}),Object(d.jsx)(de.a,{className:"menu",onClick:function(e){l(e.target)},children:Object(d.jsx)(Oe.a,{fontSize:"large"})})]}),Object(d.jsx)(me,{isOpen:o,anchorEl:r,handleClose:function(){l(null)}})]})}function ge(){var e=Object(a.useContext)(Z),t=e.isEditing,n=e.editText,c=e.textChange;return Object(d.jsx)("div",{children:t&&Object(d.jsx)("div",{className:"search",children:Object(d.jsx)("textarea",{className:"edit-area",rows:10,onChange:c,value:n})})})}var ve=n(115);n(144),n(145);function pe(e){var t=e.rolls.map((function(e,t){return Object(d.jsxs)(a.Fragment,{children:[0===t?"":"+",Object(d.jsx)(E,{roll:e},t)]})}));return Object(d.jsx)(d.Fragment,{children:t})}function Ce(e){var t=e.rolls,n=e.titled,a=t.rolls.map((function(e,t){return(0!=t?"|":"")+e.total.toString()})),c=t.rolls.map((function(e,t){return Object(d.jsxs)(d.Fragment,{children:[0!=t?"|":"",Object(d.jsx)(pe,{rolls:e.dice})]})}));return Object(d.jsxs)(y.a,{className:n?"titled-log-roll":"untitled-log-roll",children:[t.title&&t.title+" ",a," (",c,")",0!=t.bonus?(t.bonus>0?"+":"-")+Math.abs(t.bonus):Object(d.jsx)(d.Fragment,{})]})}function Ne(e){var t=e.actorName,n=e.actionName;if(!t&&!n)return Object(d.jsx)(d.Fragment,{});var a="";return a=t&&n?t+" - "+n+":":t?t+":":n+":",Object(d.jsxs)(y.a,{variant:"h6",children:[" ",a]})}function ye(e){var t=e.actionResults,n=void 0!=t.monsterName||void 0!=t.actionName,a=t.rolls.map((function(e,t){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(Ce,{titled:n,rolls:e},t)})}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ne,{actorName:t.monsterName,actionName:t.actionName}),a]})}function Se(){var e=Object(a.useContext)(_).rollLog.map((function(e){return Object(d.jsx)(ye,{actionResults:e})}));return Object(d.jsxs)("div",{className:"sticky",children:[Object(d.jsx)(y.a,{variant:"caption",children:"Rolls"}),Object(d.jsx)(ve.a,{className:"scroller",children:e})]})}var ke=function(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)(fe,{}),Object(d.jsxs)("div",{className:"contain",children:[Object(d.jsx)(ge,{}),Object(d.jsx)(ie,{})]}),Object(d.jsx)(Se,{})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(I,{children:Object(d.jsx)(O,{children:Object(d.jsx)($,{children:Object(d.jsx)(ke,{})})})})}),document.getElementById("root")),Fe()}},[[146,1,2]]]);
//# sourceMappingURL=main.03eb6a94.chunk.js.map